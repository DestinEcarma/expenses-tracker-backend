"use strict";(self.webpackChunkexpenses_tracker=self.webpackChunkexpenses_tracker||[]).push([[992],{992:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var r=a(43);const s=(0,r.createContext)([]),n=(0,r.createContext)(void 0);function o(){const e=(0,r.useContext)(n);if(void 0===e)throw new Error("useSetRawCategoryExpensesContext must be used within a SetRawCategoryExpensesContext");return e}var c=a(861),l=a(596),i=a(698),d=a(865),u=a(156),f=a(184);const x={faArray:Object.entries(f),fa:{}};function m(e){const t=e.split(":");return x[t[0]][t[1]]}x.faArray.forEach((e=>{let[t,a]=e;return x.fa[t]=a}));var h=a(579);function p(e){let{setIcon:t}=e;const[a,s]=(0,r.useState)((()=>Object.fromEntries(x.faArray.map((e=>{let[t]=e;return[t,!1]}))))),[n,o]=(0,r.useState)(""),c=(0,r.useRef)([]);return(0,r.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&s((t=>({...t,[e.target.id]:!0})))}))}),{root:null,rootMargin:"0px",threshold:0});return c.current.forEach((t=>{e.observe(t)})),()=>e.disconnect()}),[c]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"Search...",className:"flex-grow p-2 border border-gray-500 rounded-md"}),(0,h.jsx)("div",{className:"flex-grow grid grid-cols-6 h-[300px] content-start rounded-md border border-gray-500 overflow-y-auto text-2xl items-center no-scrollbar",children:x.faArray.map((e=>{let[r,s]=e;return(0,h.jsx)("div",{"data-show":n.length<3||r.toLocaleLowerCase().includes(n.toLowerCase()),className:"w-full aspect-square flex justify-center items-center p-1 data-[show=false]:hidden",children:(0,h.jsx)("button",{onClick:()=>t("fa:".concat(r)),id:r,ref:e=>e&&c.current.push(e),type:"button",className:"flex justify-center items-center rounded shadow aspect-square w-full hover:bg-gray-200 hover:scale-110 transition-all",children:a[r]&&(0,h.jsx)(s,{})})},r)}))})]})}const b=function(e){let{setOffset:t,setIcon:a,icon:s}=e;const[n,o]=(0,r.useState)(0),c=m(s),l=(0,h.jsx)("div",{"data-open":n,className:"absolute left-0 top-0 -translate-y-full w-full data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,h.jsxs)("div",{className:"relative flex flex-col gap-4 w-full bg-white mb-4 rounded-md border border-gray-500 p-4",children:[(0,h.jsx)(p,{setIcon:e=>{a(e),1===n&&(setTimeout((()=>o(0)),200),t&&t(!1),o(-1))}}),(0,h.jsx)("div",{className:"absolute w-[15px] aspect-square rotate-45 -bottom-[1px] left-0 ml-3 translate-y-1/2 bg-white border-b border-r border-b-gray-500 border-r-gray-500"})]})});return(0,h.jsxs)(h.Fragment,{children:[0!==n&&l,(0,h.jsx)("button",{onClick:()=>{o((e=>0===e?(t&&t(!0),1):(setTimeout((()=>o(0)),200),t&&t(!1),-1*e)))},type:"button",className:"relative flex items-center justify-center border border-gray-500 hover:bg-gray-200 rounded-md p-2 h-full aspect-square transition-colors",children:(0,h.jsx)(c,{className:"text-2xl"})})]})};function g(e){let{setIsModalOpen:t,isModalOpen:a}=e;const[s,n]=(0,r.useState)("fa:FaHamburger"),[l,i]=(0,r.useState)(""),u=o();return(0,h.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),l.length>0){try{const[e,t]=await(0,d._G)(l,s);switch(t){case c.s.CREATED:u((t=>[...t,e]));break;case c.s.UNAUTHORIZED:return window.location.replace("/login");default:console.error("Status Code: ".concat(t," :: An error occurred."))}}catch(a){console.error(a)}t(-1),setTimeout((()=>{t(0),i(""),n("FaHamburger")}),200)}},"data-open":a,className:"absolute -translate-y-full -translate-x-1/2 left-1/2 flex w-dvw max-w-[400px] p-4 data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,h.jsxs)("div",{className:"relative bg-white p-4 rounded-lg flex flex-col flex-grow gap-4 drop-shadow-md",children:[(0,h.jsx)("h1",{className:"text-center text-xl font-extrabold",children:"Add Category"}),(0,h.jsxs)("div",{className:"relative flex flex-grow gap-4",children:[(0,h.jsx)(b,{icon:s,setIcon:n}),(0,h.jsx)("input",{value:l,onChange:e=>i(e.target.value),id:"name",placeholder:"Name",required:!0,className:"flex-grow p-2 border border-gray-500 rounded-md"})]}),(0,h.jsx)("button",{type:"submit",className:"w-full text-center p-2 bg-green-500 hover:bg-green-600 rounded-md text-white font-bold transition-colors shadow-md",children:"Submit"}),(0,h.jsx)("div",{className:"absolute w-[15px] aspect-square bottom-[1px] left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45 bg-white"})]})})}const w=function(){const[e,t]=(0,r.useState)(0);return(0,h.jsxs)(h.Fragment,{children:[0!==e&&(0,h.jsx)("div",{"data-open":e,className:"w-full h-dvh fixed top-0 left-0 bg-gray-500/30 backdrop-blur-sm data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in"}),(0,h.jsxs)("div",{className:"relative",children:[0!==e&&(0,h.jsx)(g,{isModalOpen:e,setIsModalOpen:t}),(0,h.jsx)("button",{onClick:()=>t((e=>0===e?1:(setTimeout((()=>t(0)),200),-1*e))),"data-open":e,className:"rounded-full shadow-md text-white bg-blue-500 p-2 hover:bg-blue-600 data-[open='1']:rotate-45 data-[open='1']:bg-red-500 data-[open='1']:hover:bg-red-500 transition-all duration-500 ease-out",children:(0,h.jsx)(u.OiG,{className:"text-3xl"})})]})]})},y="style_parent__fLGai",j="style_outer-border__XzHln",v="style_inner-border__oUkG-",N="style_progress__VgYaJ";const C=function(e){let{percent:t=0,borderColor:a="#ff8000",borderWidth:s="8px",children:n}=e;const[o,c]=(0,r.useState)(0),[l,i]=(0,r.useState)(t);(0,r.useEffect)((()=>{l!==t&&(c(l),i(t))}),[t]);const d={"--percent":t+"%","--border-color":a,"--border-width":s},u={"--stroke-dasharray":"calc(2 * ".concat(Math.PI," * 45%)"),"--stroke-dashoffset":"calc(var(--stroke-dasharray) - var(--stroke-dasharray) * ".concat(t," / 100)"),"--stroke-before":"calc(var(--stroke-dasharray) - var(--stroke-dasharray) * ".concat(o," / 100)"),"--stroke-after":"calc(var(--stroke-dasharray) - var(--stroke-dasharray) * ".concat(l," / 100)")};return(0,h.jsxs)("div",{style:d,className:y,children:[(0,h.jsx)("div",{className:j,children:(0,h.jsx)("div",{className:v,children:(0,h.jsx)("div",{children:n})})}),(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:N,children:(0,h.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",className:N,style:u,transform:"rotate(-90 40 40)"})})]})};function S(e){let{closeModal:t,isModalOpen:a,name:s,id:n}=e;const[l,i]=(0,r.useState)(""),[u,f]=(0,r.useState)("0"),x=o(),m=(0,r.useRef)(null),p=/^(^\.\d*$)?(^\d*\.\d$)?(^\d*\.)?(\d*)*$/;return(0,h.jsx)("div",{"data-open":a,className:"fixed flex items-center justify-center w-full h-dvh top-0 left-0 z-10 bg-gray-500/30 backdrop-blur-sm data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,h.jsx)("div",{className:"max-w-[400px] w-full p-4",children:(0,h.jsxs)("form",{onSubmit:async e=>{var a,r,s,o;if(e.preventDefault(),parseFloat(u)<=0)return null===(s=m.current)||void 0===s||s.setCustomValidity("Amount must be greater than 0."),void(null===(o=m.current)||void 0===o||o.reportValidity());try{const[e,t]=await(0,d.Kq)(n,l,parseFloat(u));switch(t){case c.s.CREATED:x((e=>e.map((e=>(e.id===n&&(e.amount+=parseFloat(u),e.transactions++),e)))));break;case c.s.UNAUTHORIZED:return window.location.replace("/login");case c.s.BAD_REQUEST:return null===(a=m.current)||void 0===a||a.setCustomValidity("An error occurred. Please try again."),void(null===(r=m.current)||void 0===r||r.reportValidity());default:return void console.error("Status Code: ".concat(t," :: An error occurred."))}}catch(h){console.error(h)}setTimeout((()=>{i(""),f("0")}),200),t()},className:"flex flex-col gap-4 w-full p-4 rounded-md bg-white text-black font-medium",children:[(0,h.jsx)("h1",{className:"text-center text-xl font-extrabold capitalize",children:s}),(0,h.jsx)("input",{value:l,onChange:e=>i(e.target.value),type:"text",placeholder:"Description",className:"flex-grow p-2 border border-gray-500 rounded-md"}),(0,h.jsx)("input",{value:u,onChange:e=>{var t;const a=e.target.value;if(""===a)return f("0");!1!==p.test(a)&&(f("0"===u?parseFloat(a).toString():a),null===(t=m.current)||void 0===t||t.setCustomValidity(""))},type:"text",ref:m,className:"p-2 border border-gray-500 rounded-md",required:!0}),(0,h.jsxs)("div",{className:"flex justify-between text-white font-bold",children:[(0,h.jsx)("button",{onClick:t,type:"button",className:"w-1/4 rounded-md p-2 bg-red-500 hover:bg-red-600 transition-colors shadow-md",children:"Close"}),(0,h.jsx)("button",{type:"submit",className:"w-1/4 rounded-md p-2 bg-green-500 hover:bg-green-600 transition-colors shadow-md",children:"Submit"})]})]})})})}const k=function(e){let{name:t,id:a}=e;const[s,n]=(0,r.useState)(0);return(0,h.jsxs)(h.Fragment,{children:[0!==s&&(0,h.jsx)(S,{closeModal:()=>{setTimeout((()=>n(0)),200),n(-1)},isModalOpen:s,name:t,id:a}),(0,h.jsx)("button",{onClick:()=>n(1),className:"p-2 bg-green-500 hover:bg-green-600 rounded-full shadow-md transition-colors",children:(0,h.jsx)(f.FaPlus,{})})]})},E=["#ff8000","#ffff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff0080"];const A=function(e){let{id:t,name:a,icon:s}=e;const[n,l]=(0,r.useState)(0),[i,x]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[g,w]=(0,r.useState)(s),y=o(),j=()=>{setTimeout((()=>l(0)),200),l(-1)};return(0,h.jsxs)(h.Fragment,{children:[0!==n&&(0,h.jsx)("div",{"data-open":n,className:"fixed flex justify-center items-center w-full h-dvh top-0 left-0 z-10 bg-gray-500/30 backdrop-blur-sm data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,h.jsx)("div",{"data-offset":i,className:"max-w-[400px] w-full p-4 data-[offset='true']:pt-52 transition-all",children:(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await(0,d.bz)(t,m,g)&&y((e=>e.map((e=>e.id===t?{...e,name:m,icon:g}:e)))),j()},className:"flex flex-col gap-4 w-full p-4 rounded-md bg-white text-black font-medium",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("h1",{className:"text-center text-xl font-extrabold capitalize",children:a}),(0,h.jsx)("button",{onClick:async()=>{try{const e=await(0,d.Ee)(t);switch(e){case c.s.OK:y((e=>e.filter((e=>e.id!==t))));break;case c.s.UNAUTHORIZED:return window.location.replace("/login");default:console.error("Status Code: ".concat(e," :: An error occurred."))}}catch(e){console.error(e)}j()},type:"button",className:"absolute top-1/2 right-0 -translate-y-1/2 text-white p-2 bg-red-500 rounded-full",children:(0,h.jsx)(u.qbC,{})})]}),(0,h.jsxs)("div",{className:"relative flex flex-grow gap-4",children:[(0,h.jsx)(b,{icon:g,setIcon:w,setOffset:x}),(0,h.jsx)("input",{value:m,onChange:e=>p(e.target.value),id:"name",placeholder:"Name",required:!0,className:"flex-grow p-2 border border-gray-500 rounded-md"})]}),(0,h.jsxs)("div",{className:"flex justify-between text-white font-bold",children:[(0,h.jsx)("button",{onClick:j,type:"button",className:"w-1/4 rounded-md p-2 bg-red-500 hover:bg-red-600 transition-colors shadow-md",children:"Close"}),(0,h.jsx)("button",{type:"submit",className:"w-1/4 rounded-md p-2 bg-green-500 hover:bg-green-600 transition-colors shadow-md",children:"Submit"})]})]})})}),(0,h.jsx)("button",{onClick:()=>l((e=>0===e?1:(setTimeout((()=>l(0)),200),-1*e))),className:"p-2 bg-blue-500 hover:bg-blue-600 rounded-full shadow-md transition-colors",children:(0,h.jsx)(f.FaPencilAlt,{})})]})};function O(e){let{id:t,icon:a,color:r,name:s,precent:n,amount:o,transactions:c,showLine:i}=e;const d=m(a);return(0,h.jsxs)("div",{className:"flex gap-4 px-4 last:mb-4",children:[(0,h.jsx)("div",{className:"relative h-20 aspect-square text-gray-300",children:(0,h.jsx)("a",{href:"./tracker/category?id=".concat(t),className:"w-full aspect-square outline-none hover:text-gray-500 transition-colors",children:(0,h.jsx)(C,{percent:n,borderColor:r,children:(0,h.jsx)(d,{className:"text-4xl text-shadow drop-shadow-md"})})})}),(0,h.jsxs)("div",{className:"relative flex justify-between items-center gap-4 w-full font-bold min-w-0",children:[(0,h.jsxs)("div",{className:"flex flex-col justify-between w-max overflow-auto",children:[(0,h.jsx)("span",{className:"capitalize text-black overflow-auto",children:s}),(0,h.jsxs)("span",{className:"text-gray-500 text-sm tracking-tight overflow-auto",children:[c," ",c>1?"transactions":"transaction"]})]}),(0,h.jsxs)("div",{className:"flex flex-col items-end justify-between w-max",children:[(0,h.jsxs)("span",{className:"text-red-500 w-max",children:["\u20b1",(0,l.U)(o)]}),(0,h.jsxs)("div",{className:"flex gap-2 mr-[1px] text-white",children:[(0,h.jsx)(k,{name:s,id:t}),(0,h.jsx)(A,{id:t,name:s,icon:a})]})]}),i&&(0,h.jsx)("hr",{className:"absolute -bottom-2 border-1 border-gray-500 w-full"})]})]})}function T(e){let{sumAmount:t}=e;const a=(0,r.useContext)(s),n=a.length;return(0,h.jsx)("div",{className:"flex flex-col gap-4 h-full overflow-y-auto no-scrollbar",children:a.sort(((e,t)=>e.amount<t.amount?1:e.amount>t.amount?-1:0)).map(((e,a)=>(0,h.jsx)(O,{...e,color:E[a%E.length],precent:0!==t?Math.min(e.amount/t*100,100):0,showLine:a!==n-1},e.id)))})}const R=function(){const[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(0);(0,r.useEffect)((()=>{(async()=>{try{const[e,a]=await(0,d.dT)();switch(a){case c.s.OK:return t(e),void o(e.reduce(((e,t)=>e+t.amount),0));case c.s.UNAUTHORIZED:return window.location.replace("/login");default:return void console.error("Status Code: ".concat(a," :: An error occurred."))}}catch(e){console.error(e)}})()}),[]),(0,r.useEffect)((()=>{o(e.reduce(((e,t)=>e+t.amount),0))}),[e]);const u=(new Date).toLocaleString("default",{month:"short",year:"numeric"});return(0,h.jsxs)("div",{className:"flex flex-col mx-auto h-full max-h-full max-w-[720px]",children:[(0,h.jsx)("div",{className:"mb-4 py-4",children:(0,h.jsx)("h1",{className:"font-bold text-center",children:"EXPENSES"})}),(0,h.jsx)(n.Provider,{value:t,children:(0,h.jsxs)(s.Provider,{value:e,children:[(0,h.jsxs)("div",{className:"flex flex-col gap-10 flex-grow overflow-auto",children:[(0,h.jsxs)("div",{className:"flex flex-col mx-auto w-min",children:[(0,h.jsx)("span",{className:"leading-none tracking-tight font-bold text-gray-400 w-max",children:u}),(0,h.jsxs)("span",{className:"mb-4 font-extrabold text-4xl w-min",children:["\u20b1",(0,l.U)(a)]})]}),(0,h.jsx)("div",{className:"flex-grow overflow-hidden",children:(0,h.jsx)(T,{sumAmount:a})})]}),(0,h.jsx)("div",{className:"px-4 pb-4",children:(0,h.jsxs)("div",{className:"flex justify-between border-t border-gray-400 w-full pt-4",children:[(0,h.jsx)("button",{disabled:!0,className:"disabled:text-gray-300",children:(0,h.jsx)(i.QXR,{className:"text-3xl"})}),(0,h.jsx)(w,{}),(0,h.jsx)("button",{onClick:async()=>{try{const e=await(0,d.fQ)();e===c.s.OK?window.location.replace("/login"):console.error("Status Code: ".concat(e," :: An error occurred."))}catch(e){console.error(e)}},type:"button",children:(0,h.jsx)(i.ueG,{className:"text-3xl"})})]})})]})})]})}},865:(e,t,a)=>{a.d(t,{AK:()=>v,Ee:()=>j,Hx:()=>h,IY:()=>C,Kq:()=>w,Nj:()=>m,_G:()=>g,az:()=>p,bz:()=>y,dT:()=>N,fQ:()=>b,w2:()=>S});var r=a(923);const s="".concat("https://expenses-tracker.shuttleapp.rs/api","/user"),n="".concat(s,"/auth"),o="".concat(n,"/tracker"),c="".concat(o,"/category"),l="".concat(o,"/categories"),i={headers:{"Content-Type":"application/json"}},d={method:"POST",...i},u={method:"GET",...i},f={method:"DELETE",...i},x={method:"PATCH",...i};async function m(){return fetch("".concat(n),{...u,credentials:"include"}).then((e=>e.status))}async function h(e,t){return fetch("".concat(s,"/sign-up"),{...d,credentials:"include",body:JSON.stringify({username:e,password:t})}).then((e=>e.status))}async function p(e,t){return fetch("".concat(s,"/login"),{...d,credentials:"include",body:JSON.stringify({username:e,password:t})}).then((e=>e.status))}async function b(){return fetch("".concat(s,"/logout"),{...f,credentials:"include"}).then((e=>e.status))}async function g(e,t){return fetch("".concat(l),{...d,credentials:"include",body:JSON.stringify({name:e,icon:t})}).then((async a=>[{...await a.json(),name:e,icon:t,transactions:0,amount:0,precent:0,color:"#000000"},a.status]))}async function w(e,t,a){return fetch("".concat(c,"/").concat(e,"/transactions"),{...d,credentials:"include",body:JSON.stringify({amount:a,description:t})}).then((async e=>[(await e.json()).id,e.status]))}async function y(e,t,a){return fetch("".concat(c,"/").concat(e),{...x,credentials:"include",body:JSON.stringify({name:t,icon:a})}).then((e=>e.status))}async function j(e){return fetch("".concat(l,"/").concat(e),{...f,credentials:"include"}).then((e=>e.status))}async function v(e,t){return fetch("".concat(c,"/").concat(e,"/transactions/").concat(t),{...f,credentials:"include"}).then((e=>e.status))}async function N(){return fetch("".concat(l),{...u,credentials:"include"}).then((async e=>[(0,r.A)(await e.json(),{deep:!0}),e.status]))}async function C(e){return fetch("".concat(l,"/").concat(e),{...u,credentials:"include"}).then((async e=>[(0,r.A)(await e.json(),{deep:!0}),e.status]))}async function S(e){return fetch("".concat(c,"/").concat(e,"/transactions"),{...u,credentials:"include"}).then((async e=>[(0,r.A)(await e.json(),{deep:!0}).map((e=>({...e,createdAt:new Date(e.createdAt)}))),e.status]))}},861:(e,t,a)=>{a.d(t,{s:()=>r});const r={OK:200,CREATED:201,BAD_REQUEST:400,UNAUTHORIZED:401,CONFLICT:409,INTERNAL_SERVER_ERROR:500}},596:(e,t,a)=>{function r(e){return e.toLocaleString("en-US",{minimumFractionDigits:2})}a.d(t,{U:()=>r})}}]);
//# sourceMappingURL=992.4f258b2f.chunk.js.map