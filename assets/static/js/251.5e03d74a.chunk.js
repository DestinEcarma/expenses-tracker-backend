"use strict";(self.webpackChunkexpenses_tracker=self.webpackChunkexpenses_tracker||[]).push([[251],{251:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(43);const s=(0,a.createContext)(""),c=(0,a.createContext)([]),r=(0,a.createContext)(void 0);var o=n(865),i=n(475),l=n(596),d=n(156),u=n(579);const x=function(e){let{id:t}=e;const[n,c]=(0,a.useState)(0),i=(0,a.useContext)(s),l=function(){const e=(0,a.useContext)(r);if(void 0===e)throw new Error("useTransactionsContext must be used within a SetTransactionsContext");return e}(),x=()=>{setTimeout((()=>c(0)),200),c(-1)};return(0,u.jsxs)(u.Fragment,{children:[0!==n&&(0,u.jsx)("div",{"data-open":n,className:"z-50 fixed top-0 left-0 flex justify-center items-center w-full h-dvh bg-gray-500/30 backdrop-blur-sm data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,u.jsx)("form",{onSubmit:async e=>{try{e.preventDefault(),200===await(0,o.AK)(i,t)&&l((e=>e.filter((e=>e.id!==t)))),x()}catch(n){console.error(n)}},"data-open":n,className:"absolute w-max data-[open='-1']:animate-fade-out data-[open='1']:animate-fade-in",children:(0,u.jsxs)("div",{className:"left-0 flex flex-col gap-4 w-max bg-white p-4 rounded-md drop-shadow-md",children:[(0,u.jsx)("h1",{className:"text-center text-black text-xl font-bold",children:"Are you sure"}),(0,u.jsx)("p",{className:"text-gray-400",children:"This action cannot be undone."}),(0,u.jsxs)("div",{className:"flex-grow flex justify-between font-bold text-white",children:[(0,u.jsx)("button",{onClick:x,type:"button",className:"w-1/4 py-2 bg-blue-500 hover:bg-blue-600 rounded-md transition-colors shadow-md",children:"No"}),(0,u.jsx)("button",{type:"submit",className:"w-1/4 py-2 bg-red-500 hover:bg-red-600 rounded-md transition-colors shadow-md",children:"Yes"})]})]})})}),(0,u.jsx)("button",{onClick:()=>c((e=>0===e?1:(setTimeout((()=>c(0)),200),-1*e))),className:"p-2 text-white bg-red-500 hover:bg-red-600 rounded-full shadow-md transition-colors",children:(0,u.jsx)(d.qbC,{})})]})},f="default",h={day:"numeric"},m={weekday:"short"},p={hour12:!0,hour:"2-digit",minute:"2-digit"};const y=function(){const e=(0,a.useContext)(c);return(0,u.jsx)("div",{className:"flex flex-col gap-4 h-full overflow-y-auto no-scrollbar",children:e.sort(((e,t)=>{const n=new Date(e.createdAt);return new Date(t.createdAt).getTime()-n.getTime()})).map(((t,n)=>(0,u.jsxs)("div",{className:"flex gap-4 px-4 last:mb-4",children:[(0,u.jsxs)("div",{className:"flex flex-col justify-center items-center aspect-square h-20 text-gray-300 font-bold rounded-full border-8 border-gray-300 drop-shadow-md hover:text-gray-400 transition-colors",children:[(0,u.jsx)("h1",{className:"text-xl leading-[0.8]",children:t.createdAt.toLocaleDateString(f,m)}),(0,u.jsx)("h2",{className:"text-4xl leading-[0.8]",children:t.createdAt.toLocaleDateString(f,h)})]}),(0,u.jsxs)("div",{className:"relative flex-grow flex justify-between gap-4",children:[(0,u.jsxs)("div",{className:"flex-grow flex flex-col justify-center",children:[(0,u.jsx)("span",{className:"font-bold",children:t.createdAt.toLocaleTimeString(f,p)}),(0,u.jsx)("span",{className:"text-gray-400",children:t.description})]}),(0,u.jsxs)("div",{className:"flex-grow flex flex-col items-end justify-center",children:[(0,u.jsxs)("span",{className:"text-right text-red-500 font-bold",children:["\u20b1",(0,l.U)(t.amount)]}),(0,u.jsx)(x,{id:t.id})]}),n!==e.length-1&&(0,u.jsx)("hr",{className:"absolute -bottom-2 border-1 border-gray-500 w-full"})]})]})))})};var g=n(861);const w=function(){const[e,t]=(0,a.useState)([]),[n,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(0),[m,p]=(0,a.useState)("none"),[w]=(0,i.ok)();(0,a.useEffect)((()=>{(async()=>{const e=w.get("id");if(e){x(e);try{const[t,n]=await(0,o.IY)(e);switch(n){case g.s.OK:p(t.name);break;case g.s.UNAUTHORIZED:return window.location.replace("/login");default:console.error("Status Code: ".concat(n," :: An error occurred."))}}catch(n){console.error(n)}try{const[n,a]=await(0,o.w2)(e);if(a===g.s.OK)h(n.reduce(((e,t)=>e+t.amount),0)),t(n);else console.error("Status Code: ".concat(a," :: An error occurred."))}catch(n){console.error(n)}}else window.location.replace("/tracker")})()}),[]),(0,a.useEffect)((()=>{h(e.reduce(((e,t)=>e+t.amount),0))}),[e]);const b=(new Date).toLocaleString("default",{month:"short",year:"numeric"});return(0,u.jsxs)("div",{className:"flex flex-col h-full max-h-full max-w-[720px] mx-auto",children:[(0,u.jsxs)("div",{className:"relative mb-4 py-4",children:[(0,u.jsx)("a",{href:"/tracker",className:"absolute top-1/2 -translate-y-1/2 ml-4 text-3xl",children:(0,u.jsx)(d.QVr,{})}),(0,u.jsx)("h1",{className:"font-bold text-center uppercase",children:m})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-10 flex-grow overflow-auto",children:[(0,u.jsxs)("div",{className:"flex flex-col mx-auto w-min",children:[(0,u.jsx)("span",{className:"leading-none tracking-tight font-bold text-gray-400 w-max",children:b}),(0,u.jsxs)("span",{className:"mb-4 font-extrabold text-4xl w-min",children:["\u20b1",(0,l.U)(f)]})]}),(0,u.jsxs)("div",{className:"flex-grow overflow-hidden pb-4 h-full",children:[(0,u.jsx)(s.Provider,{value:n,children:(0,u.jsx)(r.Provider,{value:t,children:(0,u.jsx)(c.Provider,{value:e,children:(0,u.jsx)(y,{})})})}),(0,u.jsx)("hr",{className:"flex-grow mx-4 border-1 border-gray-500"})]})]})]})}},865:(e,t,n)=>{n.d(t,{AK:()=>N,Ee:()=>j,Hx:()=>m,IY:()=>S,Kq:()=>w,Nj:()=>h,_G:()=>g,az:()=>p,bz:()=>b,dT:()=>v,fQ:()=>y,w2:()=>A});var a=n(923);const s="".concat("https://expenses-tracker.shuttleapp.rs/api","/user"),c="".concat(s,"/auth"),r="".concat(c,"/tracker"),o="".concat(r,"/category"),i="".concat(r,"/categories"),l={headers:{"Content-Type":"application/json"}},d={method:"POST",...l},u={method:"GET",...l},x={method:"DELETE",...l},f={method:"PATCH",...l};async function h(){return fetch("".concat(c),{...u,credentials:"include"}).then((e=>e.status))}async function m(e,t){return fetch("".concat(s,"/sign-up"),{...d,credentials:"include",body:JSON.stringify({username:e,password:t})}).then((e=>e.status))}async function p(e,t){return fetch("".concat(s,"/login"),{...d,credentials:"include",body:JSON.stringify({username:e,password:t})}).then((e=>e.status))}async function y(){return fetch("".concat(s,"/logout"),{...x,credentials:"include"}).then((e=>e.status))}async function g(e,t){return fetch("".concat(i),{...d,credentials:"include",body:JSON.stringify({name:e,icon:t})}).then((async n=>[{...await n.json(),name:e,icon:t,transactions:0,amount:0,precent:0,color:"#000000"},n.status]))}async function w(e,t,n){return fetch("".concat(o,"/").concat(e,"/transactions"),{...d,credentials:"include",body:JSON.stringify({amount:n,description:t})}).then((async e=>[(await e.json()).id,e.status]))}async function b(e,t,n){return fetch("".concat(o,"/").concat(e),{...f,credentials:"include",body:JSON.stringify({name:t,icon:n})}).then((e=>e.status))}async function j(e){return fetch("".concat(i,"/").concat(e),{...x,credentials:"include"}).then((e=>e.status))}async function N(e,t){return fetch("".concat(o,"/").concat(e,"/transactions/").concat(t),{...x,credentials:"include"}).then((e=>e.status))}async function v(){return fetch("".concat(i),{...u,credentials:"include"}).then((async e=>[(0,a.A)(await e.json(),{deep:!0}),e.status]))}async function S(e){return fetch("".concat(i,"/").concat(e),{...u,credentials:"include"}).then((async e=>[(0,a.A)(await e.json(),{deep:!0}),e.status]))}async function A(e){return fetch("".concat(o,"/").concat(e,"/transactions"),{...u,credentials:"include"}).then((async e=>[(0,a.A)(await e.json(),{deep:!0}).map((e=>({...e,createdAt:new Date(e.createdAt)}))),e.status]))}},861:(e,t,n)=>{n.d(t,{s:()=>a});const a={OK:200,CREATED:201,BAD_REQUEST:400,UNAUTHORIZED:401,CONFLICT:409,INTERNAL_SERVER_ERROR:500}},596:(e,t,n)=>{function a(e){return e.toLocaleString("en-US",{minimumFractionDigits:2})}n.d(t,{U:()=>a})}}]);
//# sourceMappingURL=251.5e03d74a.chunk.js.map